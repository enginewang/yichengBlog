(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70ac28e1"],{"4f07":function(t,e,i){},"6e80":function(t,e,i){},"7b82":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:5}},[i("side-bar")],1),i("el-col",{attrs:{span:19,offset:5}},[i("el-main",[t._t("main")],2)],1)],1),i("el-footer")],1)},l=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-menu",{staticClass:"el-menu-vertical",staticStyle:{height:"100%",position:"fixed",width:"20%"},attrs:{"default-active":"1","background-color":"#232323","text-color":"#fff",mode:"vertical","active-text-color":"#409EFF"}},[i("div",{staticStyle:{"margin-top":"2em",color:"white","font-size":"large"}},[i("font-awesome-icon",{staticStyle:{"margin-bottom":"0.15em"},attrs:{icon:"laptop-code"}}),i("label",{staticStyle:{"font-size":"24px","margin-left":".5em"}},[t._v("控制台")])],1),i("el-menu-item",{staticStyle:{"margin-top":"2em"},attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-reading"}),i("router-link",{attrs:{to:"/admin/manageArticle"}},[t._v(" 文章管理 ")])],1)],2),i("el-menu-item",{attrs:{index:"2"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-news"}),i("span",[t._v("公告管理")])])],2),i("el-menu-item",{attrs:{index:"3"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-s-management"}),i("span",[t._v("资源管理")])])],2),i("el-menu-item",{attrs:{index:"4"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-chat-dot-round"}),i("span",[t._v("票圈管理")])])],2),i("el-menu-item",{attrs:{index:"5"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-s-custom"}),i("router-link",{attrs:{to:"/admin/manageUser"}},[t._v(" 用户管理 ")])],1)],2),i("el-menu-item",{attrs:{index:"6"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-house"}),i("router-link",{attrs:{to:"/article"}},[t._v(" 返回首页 ")])],1)],2)],1)},n=[],r={name:"sideBar"},o=r,c=(i("7c9e"),i("2877")),m=Object(c["a"])(o,s,n,!1,null,"75448099",null),u=m.exports,d={name:"adminLayout",components:{sideBar:u}},f=d,g=(i("c00e"),Object(c["a"])(f,a,l,!1,null,"70ad1c07",null));e["a"]=g.exports},"7c9e":function(t,e,i){"use strict";i("4f07")},"9c16":function(t,e,i){},a045:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("admin-layout",{scopedSlots:t._u([{key:"main",fn:function(){return[i("el-card",{staticStyle:{margin:"0"}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("h2",{staticStyle:{"text-align":"center"}},[t._v("添加文章")]),i("el-form-item",{attrs:{label:"文章标题"}},[i("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"文章封面"}},[i("el-input",{model:{value:t.form.cover,callback:function(e){t.$set(t.form,"cover",e)},expression:"form.cover"}}),i("upload-image",{on:{returnUrl:t.getUrl}})],1),i("el-form-item",{attrs:{label:"封面预览"}},[i("el-image",{attrs:{src:t.form.cover,size:"large"}})],1),i("el-form-item",{attrs:{label:"文章类型"}},[1==t.hackReset?i("el-select",{attrs:{placeholder:"请选择文章类型"},model:{value:t.form.kind,callback:function(e){t.$set(t.form,"kind",e)},expression:"form.kind"}},t._l(t.articleKindList,(function(e,a){return i("el-option",{key:a,attrs:{value:e.articleKind}},[t._v(" "+t._s(e.articleKind)+" "),i("el-button",{staticClass:"deleteBtn",attrs:{type:"text",size:"mini"},on:{click:function(i){return t.removeArticleKind(e)}}},[t._v(" 删除 ")])],1)})),1):t._e(),i("el-button",{on:{click:function(e){t.addArticleKindVisible=!0}}},[i("i",{staticClass:"el-icon-plus"}),t._v(" 新增类别 ")])],1),i("el-form-item",{attrs:{label:"文章标签"}},[i("el-checkbox-group",{model:{value:t.form.selectTagList,callback:function(e){t.$set(t.form,"selectTagList",e)},expression:"form.selectTagList"}},t._l(t.articleTagList,(function(e,a){return i("el-checkbox",{key:a,attrs:{name:e.articleTag,label:e.articleTag,value:e.articleTag}},[t._v(" "+t._s(e.articleTag)+" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return t.removeArticleTag(e)}}},[t._v(" 删除")])],1)})),1),i("el-button",{on:{click:function(e){t.addArticleTagVisible=!0}}},[i("i",{staticClass:"el-icon-plus"}),t._v(" 新增标签 ")])],1),i("el-form-item",{attrs:{label:"提交时间"}},[i("el-col",{attrs:{span:11}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:t.form.PubTime,callback:function(e){t.$set(t.form,"PubTime",e)},expression:"form.PubTime"}},[t._v(' style="width: 100%;"> ')])],1)],1),i("el-form-item",{attrs:{label:"文章概述"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),i("el-card",{staticClass:"box-card",staticStyle:{margin:"0","padding-top":"0"},attrs:{shadow:"never"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v(" 文章内容")]),i("el-input",{staticStyle:{width:"49%",float:"left","margin-right":"0","min-height":"50rem"},attrs:{type:"textarea",rows:50},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),i("MarkdownDisplay",{staticStyle:{width:"49%",float:"right","margin-left":".5em","min-height":"66rem","background-color":"#f5f5f5"},attrs:{markdown:t.form.content}})],1),i("el-form-item",{staticStyle:{"margin-top":"2em"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("发布文章")]),i("el-button",[t._v("取消")])],1)],1)],1),i("el-dialog",{attrs:{title:"新增类型",visible:t.addArticleKindVisible},on:{"update:visible":function(e){t.addArticleKindVisible=e}}},[i("el-form",{attrs:{model:t.kindForm}},[i("el-form-item",{attrs:{label:"类型名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.kindForm.articleKind,callback:function(e){t.$set(t.kindForm,"articleKind",e)},expression:"kindForm.articleKind"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addArticleKindVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitArticleKind()}}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"新增标签",visible:t.addArticleTagVisible},on:{"update:visible":function(e){t.addArticleTagVisible=e}}},[i("el-form",{attrs:{model:t.tagForm}},[i("el-form-item",{attrs:{label:"标签名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.tagForm.articleTag,callback:function(e){t.$set(t.tagForm,"articleTag",e)},expression:"tagForm.articleTag"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addArticleTagVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitArticleTag()}}},[t._v("确 定")])],1)],1)]},proxy:!0}])})],1)},l=[],s=i("864d"),n=i("7b82"),r=i("1185"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-upload",{attrs:{drag:"",action:"https://yichengme.site/api/upload","on-success":t.handleAvatarSuccess,multiple:""}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[t._v("将图片拖到此处，或"),i("em",[t._v("点击上传")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasUpload,expression:"hasUpload"}]},[i("div",{staticClass:"img-box",staticStyle:{"margin-top":"2em"}},[i("el-image",{attrs:{src:t.fileUrl}}),i("p",[t._v("URL: "+t._s(t.fileUrl))])],1)])],1)},c=[],m={name:"uploadImage",data:function(){return{fileUrl:"",hasUpload:!1}},methods:{handleAvatarSuccess:function(t,e,i){this.hasUpload=!0,this.fileUrl="https://yichengme.site/image/"+t,console.log(this.fileUrl),this.$emit("returnUrl",this.fileUrl)}}},u=m,d=(i("bd17"),i("2877")),f=Object(d["a"])(u,o,c,!1,null,"586e09b8",null),g=f.exports,p={name:"addArticle",data:function(){return{articleTagList:[],articleKindList:[],previewData:"",hackReset:!0,addArticleKindVisible:!1,addArticleTagVisible:!1,username:"engine",form:{title:"",cover:"",type:"blog",kind:"",tags:"",selectTagList:[],PubTime:"",desc:"",author:"",content:""},kindForm:{articleKind:""},tagForm:{articleTag:""},formLabelWidth:"120px"}},components:{adminLayout:n["a"],MarkdownDisplay:r["a"],uploadImage:g},methods:{getUrl:function(t){console.log(url)},onSubmit:function(){this.form.author=this.username,this.form.tags=JSON.stringify(this.form.selectTagList),console.log(this.form),this.submitAddArticle()},submitAddArticle:function(){var t=this;Object(s["a"])(this.form).then((function(e){200===e.status?(t.$notify({title:"增加成功",message:'"'+t.form.title+'"发布成功!',type:"success"}),t.$router.push({path:"/admin/manageArticle"})):t.$notify.error({title:"错误",message:"文章类型增加时遇到了错误"})}))},flushKindTag:function(){var t=this;this.hackReset=!1,Object(s["e"])().then((function(e){200===e.status?t.articleKindList=e.data:t.$notify.error({title:"错误",message:"获取文章类型时遇到了错误"})})),Object(s["f"])().then((function(e){200===e.status?t.articleTagList=e.data:t.$notify.error({title:"错误",message:"获取文章标签时遇到了错误"})})),this.$nextTick((function(){t.hackReset=!0}))},submitArticleKind:function(){var t=this;this.addArticleKindVisible=!1,Object(s["b"])(this.kindForm).then((function(e){200===e.status?(t.$notify({title:"增加成功",message:t.kindForm.articleKind+"成功加入了文章类型",type:"success"}),t.flushKindTag()):t.$notify.error({title:"错误",message:"文章类型增加时遇到了错误"})}))},submitArticleTag:function(){var t=this;this.addArticleTagVisible=!1,Object(s["c"])(this.tagForm).then((function(e){200===e.status?(t.$notify({title:"增加成功",message:t.tagForm.articleTag+"成功加入了文章标签",type:"success"}),t.flushKindTag()):t.$notify.error({title:"错误",message:"文章标签增加时遇到了错误"})}))},removeArticleKind:function(t){var e=this;Object(s["k"])(t.articleKind).then((function(i){204===i.status?(e.$notify({title:"删除成功",message:t.articleKind+"被移出了文章类型",type:"success"}),e.flushKindTag()):e.$notify.error({title:"错误",message:"文章类型删除时遇到了错误"})}))},removeArticleTag:function(t){var e=this;Object(s["l"])(t.articleTag).then((function(i){204===i.status?(e.$notify({title:"删除成功",message:t.articleTag+"被移出了文章标签",type:"success"}),e.flushKindTag()):e.$notify.error({title:"错误",message:"文章标签删除时遇到了错误"})}))}},created:function(){var t=this;Object(s["f"])().then((function(e){200===e.status?t.articleTagList=e.data:t.$notify.error({title:"错误",message:"获取文章标签时遇到了错误"})})),Object(s["e"])().then((function(e){200===e.status?t.articleKindList=e.data:t.$notify.error({title:"错误",message:"获取文章类型时遇到了错误"})}))}},b=p,h=(i("f1f3"),Object(d["a"])(b,a,l,!1,null,"52075c2a",null));e["default"]=h.exports},bd17:function(t,e,i){"use strict";i("6e80")},c00e:function(t,e,i){"use strict";i("eb76")},eb76:function(t,e,i){},f1f3:function(t,e,i){"use strict";i("9c16")}}]);
//# sourceMappingURL=chunk-70ac28e1.e74e2dcc.js.map