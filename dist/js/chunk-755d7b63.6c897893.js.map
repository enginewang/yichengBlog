{"version":3,"sources":["webpack:///./src/api/comment.js","webpack:///./src/views/article/detail.vue?2a2f","webpack:///./src/components/comment.vue?5735","webpack:///src/components/comment.vue","webpack:///./src/components/comment.vue?98f0","webpack:///./src/components/comment.vue","webpack:///src/views/article/detail.vue","webpack:///./src/views/article/detail.vue?f74b","webpack:///./src/views/article/detail.vue","webpack:///./src/views/article/detail.vue?58d4","webpack:///./src/components/comment.vue?148b","webpack:///./src/components/BasicLayout.vue?2a24","webpack:///src/components/BasicLayout.vue","webpack:///./src/components/BasicLayout.vue?93a9","webpack:///./src/components/BasicLayout.vue","webpack:///./src/components/BasicLayout.vue?581a"],"names":["api","commentBase","getCommentsByArticleId","id","axios","url","method","getCommentsByReplyId","addComment","data","deleteComment","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","_e","staticStyle","slot","on","prePage","_v","_s","article","title","timeStampToString","pubTime","readCount","kind","_l","tag","slice","content","$event","showPay","articleId","proxy","staticRenderFns","hackReset","directives","name","rawName","value","hasComment","expression","c","index","hasReply","comment","avatar","username","time","isMyComment","deleteThisComment","_id","replyThisComment","minRows","maxRows","model","callback","$$v","replyContent","emoji","addEmoji","postReply","replyCommentDict","reply_id","returnCommentById","toggleMarkdown","commentContent","postComment","canComment","goToRegisterPage","goToLoginPage","showLoginDialog","props","components","MarkdownDisplay","pageType","pageTypeId","type_id","userId","commentId","directCommentList","CommentList","timeString","showWriteComment","markdownShow","defaultAcgEmojiList","methods","reloadWriteComment","$nextTick","res","status","message","type","childList","i","length","consol","log","link_url","$router","push","timeStamp","Date","getTime","form","toString","window","location","reload","console","error","$notify","comment_id","isActive","replyId","getReplyList","resultList","loadComment","thisComment","flushComment","created","localStorage","userName","clear","component","basicLayout","Comment","loading","tags","commentInput","code","userLikeList","likeCountShow","isLoading","loveThis","$message","showClose","resp","computed","markdown","marked","$route","params","likeList","_t"],"mappings":"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","file":"js/chunk-755d7b63.6c897893.js","sourcesContent":["import axios from './index'\n\nconst api = {\n  commentBase: '/comment',\n}\n\nexport default api\n\nexport function getAllComments() {\n  return axios({\n    url: api.commentBase + '/all',\n    method: 'get',\n  })\n}\n\nexport function getCommentsByArticleId(id) {\n  return axios({\n    url: api.commentBase + '/articleId/' + id,\n    method: 'get'\n  })\n}\n\nexport function getCommentsByReplyId(id) {\n  return axios({\n    url: api.commentBase + '/replyId/' + id,\n    method: 'get'\n  })\n}\n\nexport function addComment(data) {\n  return axios({\n    url: api.commentBase,\n    method: 'post',\n    data: data,\n  })\n}\n\nexport function deleteComment(id) {\n  return axios({\n    url: api.commentBase+'/' + id,\n    method: 'delete',\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('img',{staticClass:\"detail-bg\",attrs:{\"src\":require(\"@/assets/bg.jpg\")}}),_c('basic-layout',{scopedSlots:_vm._u([{key:\"main\",fn:function(){return [_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.isLoading)?_c('loading'):_vm._e()],1),_c('el-row',{staticStyle:{\"margin-top\":\"1rem\"},attrs:{\"gutter\":10,\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":21,\"md\":19,\"lg\":15,\"xl\":12}},[_c('el-card',{staticClass:\"box-card\",staticStyle:{\"background\":\"rgba(255,255,255,0.7)\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-row',[_c('el-button',{staticClass:\"backBtn\",staticStyle:{\"float\":\"left\",\"margin-left\":\"4%\"},on:{\"click\":_vm.prePage}},[_vm._v(\" 返回 \")])],1),_c('el-row',[_c('h2',{staticStyle:{\"font-family\":\"RuiZiLongShu\"}},[_vm._v(_vm._s(_vm.article.title))])]),_c('el-row',{attrs:{\"gutter\":12}},[_c('el-col',{attrs:{\"xs\":15,\"sm\":8,\"md\":8}},[_c('label',{staticStyle:{\"margin-top\":\"0.1em\"}},[_vm._v(\"发布于 \"+_vm._s(_vm.timeStampToString(_vm.article.pubTime, 'day')))])]),_c('el-col',{attrs:{\"xs\":0,\"sm\":4,\"md\":4}},[_c('label',[_vm._v(\"浏览量 \"+_vm._s(_vm.article.readCount))])]),_c('el-col',{attrs:{\"xs\":9,\"sm\":8,\"md\":8}},[_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"success\"}},[_vm._v(\" \"+_vm._s(_vm.article.kind)+\" \")]),_vm._l((_vm.tags),function(tag){return _c('el-tag',{staticStyle:{\"margin-left\":\"1em\"},attrs:{\"size\":\"mini\"}},[_vm._v(\" \"+_vm._s(tag.slice(1, -1))+\" \")])})],2)],1)],1),_c('div',{staticClass:\"content\",staticStyle:{\"text-align\":\"left\",\"padding-left\":\"1rem\",\"padding-right\":\"1rem\"}},[_c('MarkdownDisplay',{attrs:{\"markdown\":_vm.content}})],1),_c('div',{staticClass:\"like\",staticStyle:{\"margin-top\":\"2em\"}},[_c('el-row',{attrs:{\"gutter\":24,\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":3}},[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.showPay=true}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"coins\"}}),_vm._v(\" 打赏支持 \")],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"感谢您的支持！\",\"visible\":_vm.showPay},on:{\"update:visible\":function($event){_vm.showPay=$event}}},[_c('el-image',{attrs:{\"src\":\"https://i.loli.net/2020/03/11/CxKMd62LtpyUwBf.png\"}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_vm._v(\" 加载中\"),_c('span',{staticClass:\"dot\"},[_vm._v(\"...\")])])])],1)],1)],1)],1),_c('el-row',{attrs:{\"gutter\":10,\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":21,\"md\":19,\"lg\":15,\"xl\":12}},[_c('div',{staticClass:\"comment-area\"},[_c('comment',{attrs:{\"type\":\"article\",\"type_id\":_vm.articleId}})],1)])],1)]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hackReset===true)?_c('div',{staticClass:\"comment-area\"},[_c('el-card',{staticClass:\"box-card\",staticStyle:{\"margin-top\":\"2em\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('h3',{staticStyle:{\"float\":\"left\",\"margin-top\":\"0\",\"margin-bottom\":\"0\"}},[_vm._v(\"评论区\")])]),_c('div',{staticClass:\"commentShow\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hasComment),expression:\"!hasComment\"}]},[_vm._v(\" 评论区空空如也，快来抢 \"),_c('font-awesome-icon',{attrs:{\"icon\":\"couch\"}}),_vm._v(\" 吧~\")],1),_vm._l((_vm.CommentList),function(c,index){return (!c.hasReply)?_c('el-card',{key:index,staticClass:\"box-card\",staticStyle:{\"margin-bottom\":\".4em\",\"border\":\"none\"},attrs:{\"shadow\":\"hover\"}},[_c('el-row',{attrs:{\"gutter\":2}},[_c('el-col',{staticStyle:{\"margin-top\":\"1em\"},attrs:{\"span\":3}},[_c('el-avatar',{attrs:{\"src\":c.comment.avatar,\"size\":\"medium\"}}),_c('div',{staticStyle:{\"font-family\":\"'PingFang SC'\",\"font-size\":\".9em\"}},[_vm._v(_vm._s(c.comment.username))])],1),_c('el-col',{staticStyle:{\"padding-left\":\".2em\"},attrs:{\"span\":20}},[_c('div',{staticClass:\"comment-content\",staticStyle:{\"float\":\"left\",\"text-align\":\"left\",\"width\":\"100%\"}},[_c('MarkdownDisplay',{attrs:{\"markdown\":c.comment.content}})],1),_c('span',{staticStyle:{\"float\":\"left\",\"color\":\"#5a5e66\",\"font-size\":\"small\"}},[_vm._v(\" 评论于： \"+_vm._s(_vm.timeStampToString(c.comment.time, 'second')))]),(_vm.isMyComment(c.comment))?_c('el-button',{staticStyle:{\"float\":\"right\",\"color\":\"red\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteThisComment(c.comment._id)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"trash\"}}),_vm._v(\" 删除 \")],1):_vm._e(),_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"2em\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.replyThisComment(c.comment._id)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"comment-dots\"}}),_vm._v(\" 参与讨论 \")],1)],1)],1),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(c.isActive),expression:\"c.isActive\"}],attrs:{\"gutter\":2}},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":2}},[_c('el-avatar',{attrs:{\"src\":_vm.avatar,\"size\":\"medium\"}})],1),_c('el-col',{attrs:{\"span\":17}},[_c('el-input',{staticStyle:{\"float\":\"left\",\"margin-left\":\".5em\"},attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2, maxRows: 4},\"placeholder\":\"在此回复...\"},model:{value:(_vm.replyContent),callback:function ($$v) {_vm.replyContent=$$v},expression:\"replyContent\"}})],1),_c('el-col',{attrs:{\"span\":2}},[_c('el-popover',{attrs:{\"placement\":\"top\",\"title\":\"内置表情包\",\"width\":\"800\",\"trigger\":\"hover\"}},[_vm._l((_vm.defaultAcgEmojiList),function(emoji){return _c('label',{key:emoji,staticStyle:{\"margin-right\":\".5em\"}},[_c('img',{staticClass:\"emoji\",staticStyle:{\"width\":\"4em\",\"height\":\"4.5em\"},attrs:{\"src\":emoji},on:{\"click\":function($event){return _vm.addEmoji(emoji,'reply')}}})])}),_c('el-button',{attrs:{\"slot\":\"reference\",\"size\":\"small\"},slot:\"reference\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"smile-wink\"}})],1)],2)],1),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.postReply(c.comment)}}},[_vm._v(\"回复 \")]),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.replyThisComment(c.comment._id)}}},[_vm._v(\"取消 \")])],1)],1)],1),(!c.hasReply)?_c('el-card',{staticStyle:{\"width\":\"90%\",\"float\":\"right\",\"margin-bottom\":\"0\",\"margin-top\":\"0\",\"border\":\"none\",\"background-color\":\"rgba(255,255,255,0)\"},attrs:{\"shadow\":\"none\"}},_vm._l((_vm.replyCommentDict[c.comment._id]),function(reply_id){return _c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{staticStyle:{\"margin-top\":\"1em\"},attrs:{\"span\":3}},[_c('el-avatar',{attrs:{\"src\":_vm.returnCommentById(reply_id).avatar,\"size\":\"medium\"}}),_c('div',{staticStyle:{\"font-family\":\"'PingFang SC'\",\"font-size\":\".9em\"}},[_vm._v(_vm._s(_vm.returnCommentById(reply_id).username)+\" \")])],1),_c('el-col',{staticStyle:{\"padding-left\":\".2em\"},attrs:{\"span\":20}},[_c('div',{staticClass:\"comment-content\",staticStyle:{\"float\":\"left\",\"text-align\":\"left\",\"width\":\"100%\"}},[_c('MarkdownDisplay',{attrs:{\"markdown\":_vm.returnCommentById(reply_id).content}})],1),_c('span',{staticStyle:{\"float\":\"left\",\"color\":\"#5a5e66\",\"font-size\":\"small\"}},[_vm._v(\" 评论于： \"+_vm._s(_vm.timeStampToString(_vm.returnCommentById(reply_id).time, 'second')))])]),(_vm.isMyComment(_vm.returnCommentById(reply_id)))?_c('el-button',{staticStyle:{\"float\":\"right\",\"color\":\"red\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteThisComment(reply_id)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"trash\"}}),_vm._v(\" 删除 \")],1):_vm._e()],1)}),1):_vm._e()],1):_vm._e()})],2)]),_c('el-card',{staticClass:\"box-card\",staticStyle:{\"margin-top\":\"2em\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('h3',{staticStyle:{\"float\":\"left\",\"margin-top\":\"0\",\"margin-bottom\":\"0\"}},[_vm._v(\"写评论\")]),_c('label',{staticStyle:{\"float\":\"left\",\"font-size\":\"small\",\"margin-left\":\"1em\",\"margin-top\":\".3em\"}},[_vm._v(\"（支持markdown语法）\")]),_c('el-popover',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canComment),expression:\"canComment\"}],attrs:{\"placement\":\"top\",\"title\":\"内置表情包\",\"width\":\"800\",\"trigger\":\"hover\"}},[_vm._l((_vm.defaultAcgEmojiList),function(emoji){return _c('label',{key:emoji,staticStyle:{\"margin-right\":\".5em\"}},[_c('img',{staticClass:\"emoji\",staticStyle:{\"width\":\"4em\",\"height\":\"4.5em\"},attrs:{\"src\":emoji},on:{\"click\":function($event){return _vm.addEmoji(emoji,'comment')}}})])}),_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-left\":\"1em\"},attrs:{\"slot\":\"reference\",\"size\":\"small\",\"type\":\"primary\"},slot:\"reference\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"smile-wink\"}}),_vm._v(\" 插入内置表情包 \")],1)],2),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canComment),expression:\"canComment\"}],staticStyle:{\"float\":\"right\"},attrs:{\"size\":\"small\"},on:{\"click\":_vm.toggleMarkdown}},[_c('font-awesome-icon',{attrs:{\"icon\":\"marker\"}}),_vm._v(\" Markdown预览 \")],1)],1),_c('div',{staticClass:\"commentShow\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canComment),expression:\"canComment\"}],staticClass:\"write-comment\"},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":2}},[_c('el-avatar',{attrs:{\"src\":_vm.avatar,\"size\":\"medium\"}}),_c('div',{staticStyle:{\"font-family\":\"'PingFang SC'\",\"font-size\":\"small\"}},[_vm._v(_vm._s(_vm.username))])],1),_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showWriteComment),expression:\"showWriteComment\"}],staticStyle:{\"width\":\"79%\",\"float\":\"left\",\"margin-left\":\".5em\"},attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 3, maxRows: 8},\"placeholder\":\"在此评论...\"},model:{value:(_vm.commentContent),callback:function ($$v) {_vm.commentContent=$$v},expression:\"commentContent\"}}),_c('el-button',{staticStyle:{\"float\":\"right\",\"width\":\"10%\",\"padding-left\":\"1.5%\",\"padding-right\":\"1.5%\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.postComment}},[_vm._v(\" 评论 \")])],1),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.markdownShow),expression:\"markdownShow\"}],staticStyle:{\"margin-top\":\"2em\"},attrs:{\"gutter\":10}},[_c('el-col',{staticStyle:{\"text-align\":\"left\",\"background-color\":\"#f5f5f5\",\"padding\":\"1em\",\"border-radius\":\".5em\"},attrs:{\"span\":24}},[_vm._v(\" Markdown预览区： \"),_c('MarkdownDisplay',{attrs:{\"markdown\":_vm.commentContent}})],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.canComment),expression:\"!canComment\"}],staticClass:\"write-comment\"},[_vm._v(\" 抱歉，您没有登陆，不能发表评论哦，点击 \"),_c('el-button',{staticStyle:{\"font-size\":\"16px\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.goToRegisterPage}},[_vm._v(\"注册\")]),_vm._v(\" 或 \"),_c('el-button',{staticStyle:{\"font-size\":\"16px\",\"margin-left\":\"0\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.goToLoginPage}},[_vm._v(\"登录\")])],1)])]),_c('el-dialog',{attrs:{\"title\":\"抱歉，只有登录后才能发表观点哦\",\"visible\":_vm.showLoginDialog},on:{\"update:visible\":function($event){_vm.showLoginDialog=$event}}},[_vm._v(\" 点击 \"),_c('el-button',{staticStyle:{\"font-size\":\"16px\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.goToRegisterPage}},[_vm._v(\"注册\")]),_vm._v(\" 或 \"),_c('el-button',{staticStyle:{\"font-size\":\"16px\",\"margin-left\":\"0\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.goToLoginPage}},[_vm._v(\"登录\")])],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"comment-area\" v-if=\"hackReset===true\">\n    <el-card class=\"box-card\" style=\"margin-top: 2em;\">\n      <div slot=\"header\" class=\"clearfix\">\n        <h3 style=\"float: left;margin-top: 0; margin-bottom: 0\">评论区</h3>\n      </div>\n      <div class=\"commentShow\">\n        <div v-show=\"!hasComment\"> 评论区空空如也，快来抢&nbsp;<font-awesome-icon icon=\"couch\"/>&nbsp;吧~</div>\n        <el-card class=\"box-card\" v-for=\"(c, index) in CommentList\" :key=\"index\" shadow=\"hover\"\n                 style=\"margin-bottom:.4em;border: none;\" v-if=\"!c.hasReply\">\n          <el-row :gutter=\"2\">\n            <el-col :span=\"3\" style=\"margin-top: 1em\">\n              <el-avatar v-bind:src=\"c.comment.avatar\" size=\"medium\"></el-avatar>\n              <div style=\"font-family: 'PingFang SC'; font-size: .9em;\">{{ c.comment.username }}</div>\n            </el-col>\n            <el-col :span=\"20\" style=\"padding-left: .2em;\">\n              <div class=\"comment-content\" style=\"float: left;text-align: left; width: 100%\">\n                <MarkdownDisplay :markdown=\"c.comment.content\"></MarkdownDisplay>\n              </div>\n              <span\n                style=\"float: left;color: #5a5e66; font-size: small\"> 评论于： {{ timeStampToString(c.comment.time, 'second') }}</span>\n              <el-button type=\"text\" v-if=\"isMyComment(c.comment)\" @click=\"deleteThisComment(c.comment._id)\"\n                         style=\"float: right;color: red\">\n                <font-awesome-icon icon=\"trash\"/>\n                删除\n              </el-button>\n              <el-button type=\"text\" @click=\"replyThisComment(c.comment._id)\" style=\"float: right;margin-right: 2em;\">\n                <font-awesome-icon icon=\"comment-dots\"/>&nbsp;&nbsp;&nbsp;参与讨论\n              </el-button>\n\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"2\" v-show=\"c.isActive\">\n            <el-row :gutter=\"10\">\n              <el-col :span=\"2\">\n                <el-avatar v-bind:src=\"avatar\" size=\"medium\"></el-avatar>\n              </el-col>\n              <el-col :span=\"17\">\n                <el-input\n                  type=\"textarea\"\n                  :autosize=\"{ minRows: 2, maxRows: 4}\"\n                  placeholder=\"在此回复...\"\n                  style=\"float: left;margin-left: .5em;\"\n                  v-model=\"replyContent\">\n                </el-input>\n              </el-col>\n              <el-col :span=\"2\">\n                <el-popover\n                  placement=\"top\"\n                  title=\"内置表情包\"\n                  width=\"800\"\n                  trigger=\"hover\">\n                  <label v-for=\"emoji in defaultAcgEmojiList\" :key=\"emoji\" style=\"margin-right: .5em\">\n                    <img :src=\"emoji\" style=\"width: 4em;height: 4.5em\" class=\"emoji\"\n                         @click=\"addEmoji(emoji,'reply')\"></img>\n                  </label>\n                  <el-button slot=\"reference\" size=\"small\">\n                    <font-awesome-icon icon=\"smile-wink\"/>\n                  </el-button>\n                </el-popover>\n              </el-col>\n              <el-col :span=\"2\">\n\n                <el-button size=\"mini\" type=\"primary\"\n                           @click=\"postReply(c.comment)\">回复\n                </el-button>\n                <el-button style=\"margin-left: 0\" size=\"mini\"\n                           @click=\"replyThisComment(c.comment._id)\">取消\n                </el-button>\n              </el-col>\n            </el-row>\n          </el-row>\n          <el-card v-if=\"!c.hasReply\"\n                   style=\"width: 90%; float: right;margin-bottom:0;margin-top:0;border: none;background-color: rgba(255,255,255,0)\"\n                   shadow=\"none\">\n            <el-row :gutter=\"10\" v-for=\"reply_id in replyCommentDict[c.comment._id]\">\n              <el-col :span=\"3\" style=\"margin-top: 1em\">\n                <el-avatar v-bind:src=\"returnCommentById(reply_id).avatar\" size=\"medium\"></el-avatar>\n                <div style=\"font-family: 'PingFang SC'; font-size: .9em;\">{{ returnCommentById(reply_id).username }}\n                </div>\n              </el-col>\n\n              <el-col :span=\"20\" style=\"padding-left: .2em;\">\n                <div class=\"comment-content\" style=\"float: left;text-align: left; width: 100%\">\n                  <MarkdownDisplay :markdown=\"returnCommentById(reply_id).content\"></MarkdownDisplay>\n                </div>\n                <span\n                  style=\"float: left;color: #5a5e66; font-size: small\"> 评论于： {{ timeStampToString(returnCommentById(reply_id).time, 'second') }}</span>\n              </el-col>\n              <el-button type=\"text\" v-if=\"isMyComment(returnCommentById(reply_id))\"\n                         @click=\"deleteThisComment(reply_id)\"\n                         style=\"float: right;color: red\">\n                <font-awesome-icon icon=\"trash\"/>\n                删除\n              </el-button>\n            </el-row>\n          </el-card>\n\n        </el-card>\n      </div>\n    </el-card>\n    <el-card class=\"box-card\" style=\"margin-top: 2em;\">\n      <div slot=\"header\" class=\"clearfix\">\n        <h3 style=\"float: left;margin-top: 0; margin-bottom: 0\">写评论</h3>\n        <label style=\"float: left;font-size: small;margin-left: 1em;margin-top: .3em;\">（支持markdown语法）</label>\n        <el-popover\n          placement=\"top\"\n          title=\"内置表情包\"\n          width=\"800\"\n          trigger=\"hover\"\n          v-show=\"canComment\">\n          <label v-for=\"emoji in defaultAcgEmojiList\" :key=\"emoji\" style=\"margin-right: .5em\">\n            <img :src=\"emoji\" style=\"width: 4em;height: 4.5em\" class=\"emoji\" @click=\"addEmoji(emoji,'comment')\"></img>\n          </label>\n          <el-button slot=\"reference\" size=\"small\" type=\"primary\" style=\"float: right;margin-left: 1em;\">\n            <font-awesome-icon icon=\"smile-wink\"/>&nbsp;&nbsp;插入内置表情包\n          </el-button>\n        </el-popover>\n        <el-button size=\"small\" style=\"float: right\" @click=\"toggleMarkdown\" v-show=\"canComment\">\n          <font-awesome-icon icon=\"marker\"/>&nbsp;&nbsp;Markdown预览\n        </el-button>\n      </div>\n      <div class=\"commentShow\">\n        <div class=\"write-comment\" v-show=\"canComment\">\n          <el-row :gutter=\"10\">\n            <el-col :span=\"2\">\n              <el-avatar v-bind:src=\"avatar\" size=\"medium\"></el-avatar>\n              <div style=\"font-family: 'PingFang SC';font-size: small\">{{ username }}</div>\n            </el-col>\n            <el-input v-show=\"showWriteComment\"\n                      type=\"textarea\"\n                      :autosize=\"{ minRows: 3, maxRows: 8}\"\n                      placeholder=\"在此评论...\"\n                      style=\"width: 79%;float: left;margin-left: .5em;\"\n                      v-model=\"commentContent\">\n            </el-input>\n\n            <el-button type=\"primary\" style=\"float: right; width: 10%;padding-left: 1.5%;padding-right: 1.5%;\"\n                       @click=\"postComment\">\n              评论\n            </el-button>\n          </el-row>\n          <el-row :gutter=\"10\" style=\"margin-top: 2em\" v-show=\"markdownShow\">\n            <el-col :span=\"24\" style=\"text-align: left; background-color: #f5f5f5; padding: 1em;border-radius: .5em;\">\n              Markdown预览区：\n              <MarkdownDisplay :markdown=\"commentContent\"></MarkdownDisplay>\n            </el-col>\n          </el-row>\n\n        </div>\n        <div class=\"write-comment\" v-show=\"!canComment\">\n          抱歉，您没有登陆，不能发表评论哦，点击\n          <el-button type=\"text\" @click=\"goToRegisterPage\" style=\"font-size: 16px\">注册</el-button>\n          或\n          <el-button type=\"text\" @click=\"goToLoginPage\" style=\"font-size: 16px;margin-left: 0;\">登录</el-button>\n        </div>\n\n      </div>\n    </el-card>\n    <el-dialog title=\"抱歉，只有登录后才能发表观点哦\" :visible.sync=\"showLoginDialog\">\n      点击\n      <el-button type=\"text\" @click=\"goToRegisterPage\" style=\"font-size: 16px\">注册</el-button>\n      或\n      <el-button type=\"text\" @click=\"goToLoginPage\" style=\"font-size: 16px;margin-left: 0;\">登录</el-button>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getUserByName } from '../api/user'\nimport { addComment, deleteComment, getCommentsByArticleId, getCommentsByReplyId } from '../api/comment'\nimport { updateArticle } from '../api/blog'\nimport MarkdownDisplay from './markdownDisplay'\nimport 'highlight.js/styles/googlecode.css'\nimport commonLayout from './commonLayout'\n// import Clipboard from 'clipboard'\n\nexport default {\n  name: 'comment',\n  props: ['type', 'type_id'],\n  components: {\n    MarkdownDisplay\n  },\n  data () {\n    return {\n      pageType: '',\n      pageTypeId: this.type_id,\n      username: '',\n      userId: '',\n      avatar: '',\n      canComment: false,\n      commentContent: '',\n      replyContent: '',\n      commentId: '',\n      directCommentList: [],\n      replyCommentDict: {},\n      CommentList: [],\n      timeString: '',\n      showLoginDialog: false,\n      showWriteComment: true,\n      hasComment: false,\n      hackReset: true,\n      markdownShow: false,\n      defaultAcgEmojiList: [\n        'https://i.loli.net/2020/03/11/xt9cGHEFokXulPZ.png',\n        'https://i.loli.net/2020/03/11/Tdnxok7pSYzjCrH.png',\n        'https://i.loli.net/2020/03/11/sqrbZvpJWQFKoj8.png',\n        'https://i.loli.net/2020/03/11/BWVY2RMhHsrCSvz.png',\n        'https://i.loli.net/2020/03/11/yVkgFCHlR2O5XsB.png',\n        'https://i.loli.net/2020/03/11/OQoElrezfmxDSgA.png',\n        'https://i.loli.net/2020/03/11/jQOP19ayUE6udoe.png',\n        'https://i.loli.net/2020/03/11/7hjfJq4Tt6cxDMW.png',\n        'https://i.loli.net/2020/03/11/bA9NUIFWOXmhQzB.png',\n        'https://i.loli.net/2020/03/11/bW8jxS4OMFpnc2H.png',\n        'https://i.loli.net/2020/03/11/LBRyfn4YXQMPH3z.png',\n        'https://i.loli.net/2020/03/11/7HrodwaZWq9pRLX.png',\n        'https://i.loli.net/2020/03/11/KUCRImYJ3B2jbln.png',\n        'https://i.loli.net/2020/03/11/5ODdsFBRTE7XqVa.png',\n        'https://i.loli.net/2020/03/11/vgNMV1pGHUtAcOe.png',\n        'https://i.loli.net/2020/03/11/fM3Lu5kwxGXsgHc.png',\n        'https://i.loli.net/2020/03/11/6H1YGVfTvFxayzC.png',\n        'https://i.loli.net/2020/03/11/JvfeY3skm9OC1cb.png',\n        'https://i.loli.net/2020/03/11/AymDUaIbFelwcsS.png',\n        'https://i.loli.net/2020/03/11/64VBRFOeG8uK9tb.png',\n        'https://i.loli.net/2020/03/11/eGEJs7rN1OLqiHM.png',\n        'https://i.loli.net/2020/03/11/YyForpBJbjS78Pc.png',\n        'https://i.loli.net/2020/03/11/WhGig4wCekIZoVA.png',\n        'https://i.loli.net/2020/03/11/X9E5i4nJGhHPdjw.png',\n        'https://i.loli.net/2020/03/11/1yvWEniUl4BCIGF.png',\n        'https://i.loli.net/2020/03/11/T1wbmH8LYZOD6g4.png',\n        'https://i.loli.net/2020/03/11/Qb38DgNyxiYIRMf.png',\n        'https://i.loli.net/2020/03/11/i5wICKdjS24rDkA.png',\n        'https://i.loli.net/2020/03/11/K3CUe1qVujGrWkM.png',\n        'https://i.loli.net/2020/03/11/p74jhEdWbx2vVI3.png',\n        'https://i.loli.net/2020/03/11/eyFNPLXcDwSBsGW.png',\n        'https://i.loli.net/2020/03/11/dDLVy8tsCeKoSOQ.png',\n        'https://i.loli.net/2020/03/11/CG7DBpWJAEk2rsy.png',\n        'https://i.loli.net/2020/03/11/dHaIkeKT9LfJlB1.png',\n        'https://i.loli.net/2020/03/11/vm3EhNoSLBYqiAV.png',\n        'https://i.loli.net/2020/03/11/8YHMF5pNOXrdWBS.png',\n        'https://i.loli.net/2020/03/11/8FekqRVE9pya1nc.png',\n        'https://i.loli.net/2020/03/11/sxtYWZMpHh5ICPf.png',\n        'https://i.loli.net/2020/03/11/MFgUk6r3fjYJuaP.png',\n        'https://i.loli.net/2020/03/11/6PJZtLyFvkbAXpS.png',\n        'https://i.loli.net/2020/03/11/CHAvEPfr5dnGFJo.png',\n        'https://i.loli.net/2020/03/11/lwLp85Fhv6iK2db.png',\n        'https://i.loli.net/2020/03/11/BSGhpvCVLWlQ5YZ.png',\n        'https://i.loli.net/2020/03/11/MpHRPyiGboVAU9J.png',\n        'https://i.loli.net/2020/03/11/qXV4omLJlSuR9DP.png',\n        'https://i.loli.net/2020/03/11/LOYow2Wfh4Stqi5.png',\n        'https://i.loli.net/2020/03/11/lF1UQOt8AeKGS2x.png',\n        'https://i.loli.net/2020/03/11/79yHEAo8iDBTqxb.png',\n        'https://i.loli.net/2020/03/11/es9yXziZAR4G1wn.png'\n      ]\n    }\n  },\n  methods: {\n    reloadWriteComment () {\n      this.showWriteComment = false\n      this.$nextTick(function () {\n        this.showWriteComment = true\n      })\n    },\n    isMyComment (comment) {\n      if (comment.username === this.username) {\n        return true\n      } else {\n        return false\n      }\n    },\n    deleteThisComment (id) {\n      // console.log(id);\n      deleteComment(id).then((res) => {\n        if (res.status === 204) {\n          this.$notify({\n            title: '删除成功',\n            message: '评论删除成功',\n            type: 'success'\n          })\n          const childList = this.getReplyList(id)\n          // console.log(childList)\n          if (childList) {\n            for (var i = 0; i < childList.length(); i++) {\n              consol.log(childList[i])\n            }\n            deleteComment(childList[i])\n          }\n          this.flushComment()\n        } else {\n          this.$notify.error({\n            title: '错误',\n            message: '评论删除时遇到了错误'\n          })\n        }\n      })\n    },\n    addEmoji (emoji, kind) {\n      const link_url = '<img src=\"' + emoji + '\" style=\"width: 20% !important;\"' + '>'\n      if (kind === 'comment') {\n        this.commentContent += link_url\n      } else {\n        if (kind === 'reply') {\n          this.replyContent += link_url\n        }\n      }\n    },\n    returnCommentById (id) {\n      const comment = {}\n      for (let i = 0; i < this.CommentList.length; i++) {\n        if (this.CommentList[i].comment._id === id) {\n          return this.CommentList[i].comment\n        }\n      }\n    },\n    toggleMarkdown () {\n      this.markdownShow = !this.markdownShow\n    },\n    goToRegisterPage () {\n      this.$router.push({ path: '/register' })\n    },\n    goToLoginPage () {\n      this.$router.push({ path: '/login' })\n    },\n    postComment () {\n      const form = {}\n      var timeStamp = new Date().getTime()\n      form.username = this.username\n      form.avatar = this.avatar\n      form.time = timeStamp.toString()\n      form.content = this.commentContent\n      form.articleId = this.pageTypeId\n      if (this.commentContent != '') {\n        // 先把评论加进评论区，然后增加到aritcle里面\n        addComment(form).then((res) => {\n          if (res.status === 200) {\n            this.commentId = res.data._id\n            this.$notify({\n              title: '发布成功！',\n              message: '评论发布成功！',\n              type: 'success'\n            })\n            window.location.reload()\n          } else {\n            this.$notify({\n              title: '评论失败',\n              message: '可能遇到了未知的问题！',\n              type: 'error'\n            })\n          }\n        }).catch(error => {\n          console.log(error)\n          this.$notify({\n            title: '评论失败',\n            message: '可能遇到了未知的问题！',\n            type: 'error'\n          })\n        })\n      } else {\n        this.$notify({\n          title: '评论失败',\n          message: '评论区必须填写内容！',\n          type: 'error'\n        })\n      }\n    },\n    replyThisComment (comment_id) {\n      if (this.canComment) {\n        // console.log(\"comment_id\" + comment_id)\n        for (let i = 0; i < this.CommentList.length; i++) {\n          console.log(this.CommentList[i].comment._id)\n          if (this.CommentList[i].comment._id === comment_id) {\n            // console.log(this.CommentList[i].isActive)\n            // console.log(!this.CommentList[i].isActive)\n            this.CommentList[i].isActive = !this.CommentList[i].isActive\n            // console.log(this.CommentList[i].isActive)\n          }\n        }\n      } else {\n        this.showLoginDialog = true\n      }\n    },\n    postReply (comment) {\n      // console.log(comment);\n      let replyId\n      if ('replyId' in comment) {\n        replyId = comment.replyId\n      } else {\n        replyId = comment._id\n      }\n      const form = {}\n      var timeStamp = new Date().getTime()\n      form.username = this.username\n      form.avatar = this.avatar\n      form.time = timeStamp.toString()\n      form.content = this.replyContent\n      form.articleId = this.pageTypeId\n      form.replyId = replyId\n      // console.log(form);\n      if (this.replyContent != '') {\n        // 先把评论加进评论区，然后增加到aritcle里面\n        addComment(form).then((res) => {\n          if (res.status === 200) {\n            this.$notify({\n              title: '发布成功！',\n              message: '评论发布成功！',\n              type: 'success'\n            })\n            window.location.reload()\n          } else {\n            this.$notify({\n              title: '回复失败',\n              message: '可能遇到了未知的问题！',\n              type: 'error'\n            })\n          }\n        }).catch(error => {\n          console.log(error)\n          this.$notify({\n            title: '回复失败',\n            message: '可能遇到了未知的问题！',\n            type: 'error'\n          })\n        })\n      } else {\n        this.$notify({\n          title: '回复失败',\n          message: '回复评论区必须填写内容！',\n          type: 'error'\n        })\n      }\n    },\n    getReplyList (id) {\n      getCommentsByReplyId(id).then((res) => {\n        if (res.status === 200) {\n          const resultList = []\n          console.log(res.data)\n          if (res.data) {\n            for (let i = 0; i < res.data.length; i++) {\n              resultList.push(res.data[i]._id)\n            }\n            return resultList\n          } else {\n            return []\n          }\n        }\n      })\n    },\n    loadComment () {\n      this.CommentList = []\n      this.replyCommentDict = {}\n      this.directCommentList = []\n      getCommentsByArticleId(this.pageTypeId).then((res) => {\n        if (res.status === 200) {\n          for (const i in res.data) {\n            const comment = res.data[i]\n            console.log(comment)\n            const thisComment = {\n              comment: comment,\n              hasReply: false,\n              isActive: false\n            }\n            if ('replyId' in comment) {\n              thisComment.hasReply = true\n            } else {\n              this.directCommentList.push(comment._id)\n              this.hasComment = true\n              const reply = []\n              this.replyCommentDict[comment._id] = reply\n            }\n            this.CommentList.push(thisComment)\n          }\n          // console.log(this.directCommentList);\n\n          for (let i = 0; i < this.CommentList.length; i++) {\n            if (this.CommentList[i].hasReply) {\n              // console.log(this.CommentList[i]);\n              for (let j = 0; j < this.directCommentList.length; j++) {\n                // console.log(\"i=\" + i + \",j=\" + j + \":\" + this.CommentList[i].comment.replyId)\n                // console.log(\"i=\" + i + \",j=\" + j + \":\" + this.directCommentList[j])\n                if (this.CommentList[i].comment.replyId === this.directCommentList[j]) {\n                  this.replyCommentDict[this.CommentList[i].comment.replyId].push(this.CommentList[i].comment._id)\n                }\n              }\n            }\n          }\n          console.log(this.replyCommentDict)\n          console.log(this.hasComment)\n        } else {\n          console.log('Failed')\n        }\n      })\n    },\n    flushComment () {\n      this.hackReset = false\n      this.loadComment()\n      this.$nextTick(() => {\n        this.hackReset = true\n      })\n    }\n  },\n  created () {\n    if (localStorage.userName) {\n      this.canComment = true\n      // console.log(this.canComment);\n      this.username = localStorage.userName\n      getUserByName(this.username).then((res) => {\n        if (res.status === 200) {\n          this.avatar = res.data.avatar\n          this.userId = res.data.userId\n        } else {\n        }\n      }).catch(error => {\n        localStorage.clear()\n      })\n    }\n\n    this.loadComment()\n  }\n}\n</script>\n\n<style scoped>\n.userInfo {\n  padding: 0;\n}\n\n.el-card {\n  background: rgba(255, 255, 255, 0.7);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment.vue?vue&type=template&id=e045034c&scoped=true&\"\nimport script from \"./comment.vue?vue&type=script&lang=js&\"\nexport * from \"./comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment.vue?vue&type=style&index=0&id=e045034c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e045034c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <img class=\"detail-bg\" src=\"@/assets/bg.jpg\">\n    <basic-layout v-slot:main>\n      <transition name=\"fade\">\n        <loading v-if=\"isLoading\"></loading>\n      </transition>\n      <el-row :gutter=\"10\" type=\"flex\" justify=\"center\" style=\"margin-top: 1rem;\">\n        <el-col :xs=\"24\" :sm=\"21\" :md=\"19\" :lg=\"15\" :xl=\"12\">\n          <el-card class=\"box-card\" style=\"background: rgba(255,255,255,0.7)\">\n            <div slot=\"header\" class=\"clearfix\">\n              <el-row>\n                <el-button class=\"backBtn\" @click=\"prePage\" style=\"float: left;margin-left: 4%\"> 返回\n                </el-button>\n              </el-row>\n              <el-row>\n                <h2 style=\"font-family: RuiZiLongShu\">{{ article.title }}</h2>\n              </el-row>\n              <el-row :gutter=\"12\">\n                <el-col :xs=\"15\" :sm=\"8\" :md=\"8\">\n                  <label style=\"margin-top:0.1em;\">发布于\n                    {{ timeStampToString(article.pubTime, 'day') }}</label>\n                </el-col>\n                <el-col :xs=\"0\" :sm=\"4\" :md=\"4\">\n                  <label>浏览量\n                    {{ article.readCount }}</label>\n                </el-col>\n                <el-col :xs=\"9\" :sm=\"8\" :md=\"8\">\n                  <el-tag size=\"mini\" type=\"success\">\n                    {{ article.kind }}\n                  </el-tag>\n                  <el-tag v-for=\"tag in tags\" size=\"mini\" style=\"margin-left: 1em\">\n                    {{ tag.slice(1, -1) }}\n                  </el-tag>\n                </el-col>\n              </el-row>\n            </div>\n            <div class=\"content\" style=\"text-align: left; padding-left: 1rem;padding-right: 1rem;\">\n              <MarkdownDisplay :markdown=\"content\"></MarkdownDisplay>\n              <!--<markdown-it-vue class=\"md-body\" :content=\"content\"/>-->\n            </div>\n            <div class=\"like\" style=\"margin-top: 2em;\">\n              <el-row :gutter=\"24\" type=\"flex\" justify=\"center\">\n                <el-col :span=\"3\">\n                  <el-button type=\"danger\" @click=\"showPay=true\">\n                    <font-awesome-icon icon=\"coins\"/>\n                    打赏支持\n                  </el-button>\n                </el-col>\n              </el-row>\n            </div>\n            <el-dialog title=\"感谢您的支持！\" :visible.sync=\"showPay\">\n              <el-image src=\"https://i.loli.net/2020/03/11/CxKMd62LtpyUwBf.png\">\n                <div slot=\"placeholder\" class=\"image-slot\">\n                  加载中<span class=\"dot\">...</span>\n                </div>\n              </el-image>\n            </el-dialog>\n\n\n          </el-card>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"10\" type=\"flex\" justify=\"center\">\n        <el-col :xs=\"24\" :sm=\"21\" :md=\"19\" :lg=\"15\" :xl=\"12\">\n          <div class=\"comment-area\">\n            <comment type=\"article\" :type_id=\"articleId\"/>\n          </div>\n        </el-col>\n      </el-row>\n    </basic-layout>\n  </div>\n</template>\n\n<script>\nimport basicLayout from '../../components/BasicLayout'\nimport { clickLove, getArticleDetail } from '../../api/blog'\nimport MarkdownDisplay from '../../components/markdownDisplay'\n// import MarkdownItVue from \"markdown-it-vue\";\n// import \"markdown-it-vue/dist/markdown-it-vue.css\"\nimport Comment from '../../components/comment'\n//import 'highlight.js/styles/googlecode.css'\nimport 'highlight.js/styles/github.css'\nimport { getUserByName } from '../../api/user'\nimport loading from '../../components/loading'\n\nexport default {\n  name: 'ArticleDetail',\n  components: {\n    basicLayout,\n    MarkdownDisplay,\n    Comment,\n    loading\n  },\n  data () {\n    return {\n      article: {},\n      content: '',\n      tags: [],\n      commentInput: '',\n      code: 'print(hello world)',\n      articleId: '',\n      showPay: false,\n      userLikeList: [],\n      likeCountShow: 0,\n      isLoading: true,\n    }\n  },\n  methods: {\n    prePage () {\n      this.$router.push({ 'path': '/article' })\n    },\n    loveThis () {\n      if (!localStorage.userName) {\n        this.$message({\n          showClose: true,\n          message: '您需要先登录哦',\n          type: 'error',\n        })\n      } else if (this.userLikeList.indexOf(this.article._id) > -1) {\n        this.$message({\n          showClose: true,\n          message: '不能重复点赞哦，感谢支持！',\n          type: 'error',\n        })\n      } else {\n        clickLove(this.article._id).then((resp) => {\n          if (resp.status === 200) {\n            this.$message({\n              message: '点赞成功，感谢支持！',\n              type: 'success',\n            })\n            this.likeCountShow += 1\n          } else {\n          }\n        }).catch(error => {\n          console.log(error)\n          localStorage.clear()\n        })\n      }\n    },\n  },\n\n  computed: {\n    markdown () {\n      return marked(this.content)\n    },\n  },\n  created () {\n    this.articleId = this.$route.params.id\n    getArticleDetail(this.articleId, 1).then((res) => {\n      console.log(res)\n      if (res.status === 200) {\n        this.article = res.data\n        this.content = this.article.content\n        this.tags = this.article.tags.slice(1, -1).split(',')\n        this.likeCountShow = this.article.likeCount\n        if (localStorage.userName) {\n          getUserByName(localStorage.userName).then((resp) => {\n            if (resp.status === 200) {\n              if (!resp.data.likeList) {\n                this.userLikeList = []\n              } else {\n                this.userLikeList = resp.data.likeList.split(',')\n              }\n              console.log(this.userLikeList)\n            } else {\n            }\n          }).catch(error => {\n            console.log(error)\n            localStorage.clear()\n          })\n        }\n        this.isLoading = false\n\n      } else {\n        console.log('Failed')\n      }\n    })\n    console.log(this.content)\n  },\n}\n</script>\n\n<style>\n\n.fade-enter,\n.fade-leave-active {\n  opacity: 0;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s;\n}\n\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: \"\";\n}\n\n.clearfix:after {\n  clear: both\n}\n\ncode {\n  font-family: \"Fira Code Medium\";\n  font-size: small;\n}\n\npre {\n  background: rgba(255, 255, 255, 0.4);\n  border-radius: 0.4em;\n  padding: 1em 1em 1em 1em;\n}\n\np > code {\n  background: rgba(255, 255, 255, 0.4);\n  padding: .3em .3em .2em .3em;\n  box-shadow: 1px 2px 1px rgba(0, 0, 0, .05);\n  border-radius: 0.3em;\n  margin-right: 0.2em;\n}\n\ntable {\n  border-collapse: collapse;\n  margin: 0 auto;\n  text-align: center;\n}\n\ntable td, table th {\n  border: 1px solid #cad9ea;\n  color: #666;\n  height: 30px;\n}\n\ntable {\n  background-color: #D9ECFF;\n  width: 80%;\n}\n\nth {\n  background-color: #D9ECFF;\n}\n\ntable tr:nth-child(odd) {\n  background: #fff;\n}\n\ntable tr:nth-child(even) {\n  background: #ECF5FF;\n}\n\n.detail-bg {\n  left: 0;\n  object-fit: cover;\n  filter: blur(15px);\n  height: 200%;\n  width: auto \\9;\n  width: 100%;\n  z-index: 0;\n  position: fixed;\n  opacity: 0.4;\n}\n\n\n.el-card__header {\n  border-bottom: none;\n}\n\n.el-card {\n  padding-bottom: .5em;\n}\n\np > a {\n  text-decoration: none;\n  color: #1482f0;\n}\n\n.katex {\n  font: normal 1em KaTeX_Main, Times New Roman, serif;\n  line-height: 0;\n}\n\np > img {\n  max-width: 100%;\n  margin-left: 6%;\n  margin-right: 6%;\n  width: 86%;\n}\n\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=639d4ace&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=style&index=0&id=e045034c&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',[_c('nav-menu')],1),_c('el-main',{staticStyle:{\"padding-top\":\"1.5em\"}},[_c('el-row',{attrs:{\"gutter\":0}},[_c('el-col',{attrs:{\"span\":24}},[_vm._t(\"main\")],2)],1)],1),_c('my-footer')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <el-container>\n        <el-header>\n            <nav-menu/>\n        </el-header>\n        <el-main style=\"padding-top: 1.5em;\">\n            <el-row :gutter=\"0\">\n                <el-col :span=\"24\">\n                    <slot name=\"main\"/>\n                </el-col>\n            </el-row>\n        </el-main>\n        <my-footer/>\n    </el-container>\n</template>\n\n<script>\n    import NavMenu from \"./NavMenu\";\n    import MyFooter from \"../components/myFooter\"\n\n    export default {\n        name: \"basicLayout\",\n        components: {NavMenu, MyFooter},\n        //props: ['type', 'type_id'],\n    }\n</script>\n\n<style scoped>\n    .el-header {\n        padding: 0;\n    }\n\n    main {\n        min-height: calc(85vh);\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasicLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasicLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BasicLayout.vue?vue&type=template&id=3ea3ce25&scoped=true&\"\nimport script from \"./BasicLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./BasicLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BasicLayout.vue?vue&type=style&index=0&id=3ea3ce25&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ea3ce25\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasicLayout.vue?vue&type=style&index=0&id=3ea3ce25&scoped=true&lang=css&\""],"sourceRoot":""}